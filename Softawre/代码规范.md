

# 代码规范



## 结构体的定义

在结构体的定义中，结构体定义的名称前面使用_下划线，在声明一个结构体变量时使用大写 

```C++
typedef struct 
{ 
    UINT16 WidthNum;     //横向 
    UINT16 HeightNum;    //竖向 
    BYTE byRes[32]; 
}LED_DISPLAY_AREA, *LED_DISPLAY_AREA_PTR; 
```

2.2.6 规则:变量命名要求自注释，若命名不是自注释的均需在声明时添加注释 ，

定义的结构体变量使用小写。

```C++
LED_DISPLAY_AREA ledDisaplArea;
```



# 类的定义

类的定义需要再前面是C_,类名首字母大写；

```C++
class C_LanguageMng
{
public:
	C_LanguageMng();
	~C_LanguageMng();
private:
};
```

## 类的成员定义

类的成员变量以m_大小写混排命名，全局变量以g_大小写混排命名 

## 指针的成员定义

指针变量命名以p_大小写混排命名，成员mp_xx，全局gp_xx 

## 宏定义

规则:使用const常量取代宏，大写单词，下划线分隔 
说明：宏是简单的文本替换，在预处理阶段时完成，运行报错时直接报相应的值；跟踪调试时也 是显示值，而不是宏名；宏没有类型检查，不安全；宏没有作用域。 

```C++
#define  MAX_MSISDN_LEN (20) //不好的例子  
const int  MAX_MSISDN_LEN = 20; //好的例子
```


1.DLEVEL_FAULT

属于系统致命错误，一般出现意味着系统基本等于挂掉了，需要人工立即介入处理。如：

1）系统内存使用率超过临界值 小内存申请失败 类实例化失败
 
2）redis数据库异常


2.DLEVEL_ERROR

影响到程序正常运行、当前请求正常运行的异常情况。如：

1）打开配置文件失败

2）业务功能异常

3）所有影响功能使用的异常，包括:大内存申请失败 、空指针异常以及业务异常之外的所有异常


3.DLEVEL_WARNNING

告警日志。不应该出现但是不影响程序、当前请求正常运行的异常情况。。

但是一旦出现了也需要关注，因此一般该级别的日志达到一定的阈值之后，就得提示给用户或者需要关注的人了。如：

1）有容错机制的时候出现的错误情况

2）找不到配置文件，但是系统能自动创建配置文件                        

3）超过阈值的时候，如cpu使用率已经超过50%的阈值但没超过临界值，就需要打印DLEVEL_WARNNING级别的日志


4.DLEVEL_REPORT

记录系统运行的关键状态、关键业务逻辑或者关键执行节点。平时无需关注，但出问题时可根据DLEVEL_REPORT日志诊断出问题



5.DLEVEL_INFO

调试信息，对系统每一步的运行状态进行精确的记录。


6.DLEVEL_TRACE

特别详细的服务调用流程各个节点信息。

